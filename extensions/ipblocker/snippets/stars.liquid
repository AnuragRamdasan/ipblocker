<script>
  async function fetchCountries() {
    try {
      const response = await fetch("https://cafe-variance-lawyer-convention.trycloudflare.com/countries");
      const countries = await response.json();
    
      const data = await fetch("https://api.ipify.org?format=json")
      const ipData = await data.json()

      const countryData = await fetch('https://ipapi.co/' + ipData.ip + '/json/')
      const country = await countryData.json()

      const currentCountry = country["country_code"]
      const blockedCountries = countries.countries.map(c => c["country_code"])

      if(blockedCountries.includes(currentCountry)) {
        alert("This website is not accessible in your country.")
      }
    } catch(err) {
      console.log("err")
      console.log(err)
    }    
  }

  document.addEventListener('DOMContentLoaded', function() {
    // Product page specific JavaScript here
    fetchCountries()
  });
  
</script>